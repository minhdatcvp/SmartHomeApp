{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { Fragment, useEffect, useState } from 'react';\nimport { useNavigation } from '@react-navigation/core';\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport HomeScreen from \"./HomeScreen\";\nimport RoomScreen from \"./RoomScreen\";\nimport SettingScreen from \"./SettingScreen\";\nimport { Ionicons } from '@expo/vector-icons';\nimport { Entypo } from '@expo/vector-icons';\nimport { SimpleLineIcons } from '@expo/vector-icons';\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, FacebookAuthProvider, signInWithCredential } from 'firebase/auth';\nimport { auth } from \"../../firebase-config\";\nimport { db } from \"../../firebase-config\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { onValue, ref } from 'firebase/database';\nimport { setDataUser, setDataHome } from \"../Actions/counts\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Tab = createBottomTabNavigator();\n\nvar MainScreen = function MainScreen(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var dispatch = useDispatch();\n  var userId = useSelector(function (s) {\n    return s.state.userId;\n  });\n  useEffect(function () {\n    var unsubscribe = auth.onAuthStateChanged(function (user) {\n      if (!user) {\n        navigation.replace(\"Login\");\n      } else {\n        if (userId) {\n          var _user = onValue(ref(db, '/users/' + userId), function (querySnapShot) {\n            var data = querySnapShot.val() || [];\n            dispatch(setDataUser(data));\n            setIsLoading(true);\n          });\n        }\n      }\n    });\n    return unsubscribe;\n  }, []);\n\n  var getTabActive = function getTabActive() {\n    var tabActive = \"Home\";\n\n    if (props.route && props.route.params && props.route.params.options && props.route.params.options.tabActive) {\n      tabActive = props.route.params.options.tabActive;\n    }\n\n    return tabActive;\n  };\n\n  return isLoading ? _jsxs(Tab.Navigator, {\n    initialRouteName: getTabActive(),\n    children: [_jsx(Tab.Screen, {\n      options: {\n        headerShown: false,\n        tabBarActiveTintColor: \"#FA6400\",\n        tabBarIcon: function tabBarIcon(_ref) {\n          var color = _ref.color,\n              size = _ref.size;\n          return _jsx(Ionicons, {\n            name: \"home\",\n            color: color,\n            size: size\n          });\n        }\n      },\n      name: \"Home\",\n      component: HomeScreen\n    }), _jsx(Tab.Screen, {\n      options: {\n        headerShown: false,\n        tabBarActiveTintColor: \"#FA6400\",\n        tabBarIcon: function tabBarIcon(_ref2) {\n          var color = _ref2.color,\n              size = _ref2.size;\n          return _jsx(Entypo, {\n            name: \"sweden\",\n            color: color,\n            size: size\n          });\n        }\n      },\n      name: \"Rooms\",\n      component: RoomScreen\n    }), _jsx(Tab.Screen, {\n      options: {\n        headerShown: false,\n        tabBarActiveTintColor: \"#FA6400\",\n        tabBarIcon: function tabBarIcon(_ref3) {\n          var color = _ref3.color,\n              size = _ref3.size;\n          return _jsx(SimpleLineIcons, {\n            name: \"settings\",\n            color: color,\n            size: size\n          });\n        }\n      },\n      name: \"Settings\",\n      component: SettingScreen\n    })]\n  }) : _jsx(View, {\n    style: styles.container,\n    children: _jsx(ActivityIndicator, {\n      size: \"large\",\n      color: \"#FA6400\"\n    })\n  });\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\"\n  }\n});\nexport default MainScreen;","map":{"version":3,"names":["React","Fragment","useEffect","useState","useNavigation","createBottomTabNavigator","HomeScreen","RoomScreen","SettingScreen","Ionicons","Entypo","SimpleLineIcons","createUserWithEmailAndPassword","signInWithEmailAndPassword","onAuthStateChanged","FacebookAuthProvider","signInWithCredential","auth","db","useDispatch","useSelector","onValue","ref","setDataUser","setDataHome","Tab","MainScreen","props","isLoading","setIsLoading","dispatch","userId","s","state","unsubscribe","user","navigation","replace","querySnapShot","data","val","getTabActive","tabActive","route","params","options","headerShown","tabBarActiveTintColor","tabBarIcon","color","size","styles","container","StyleSheet","create","flex","justifyContent"],"sources":["D:/uet/KLTN/ReactNative/Test3/SmartHome/src/Screens/MainScreen.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from 'react'\r\nimport { useNavigation } from '@react-navigation/core'\r\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\r\nimport HomeScreen from './HomeScreen';\r\nimport RoomScreen from './RoomScreen';\r\nimport SettingScreen from './SettingScreen';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { Entypo } from '@expo/vector-icons';\r\nimport { SimpleLineIcons } from '@expo/vector-icons';\r\nimport {\r\n    createUserWithEmailAndPassword,\r\n    signInWithEmailAndPassword,\r\n    onAuthStateChanged,\r\n    FacebookAuthProvider,\r\n    signInWithCredential,\r\n} from 'firebase/auth';\r\nimport { auth } from '../../firebase-config'\r\nimport { db } from '../../firebase-config'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { onValue, ref } from 'firebase/database';\r\nimport { setDataUser, setDataHome } from '../Actions/counts';\r\nimport { ActivityIndicator, View, StyleSheet } from 'react-native';\r\n\r\nconst Tab = createBottomTabNavigator();\r\n\r\nconst MainScreen = (props) => {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const dispatch = useDispatch();\r\n    const userId = useSelector((s) => s.state.userId)\r\n\r\n    // \r\n    useEffect(() => {\r\n        const unsubscribe = auth.onAuthStateChanged(user => {\r\n            if (!user) {\r\n                navigation.replace(\"Login\")\r\n            }\r\n            else {\r\n                if (userId) {\r\n                    const user = onValue(ref(db, '/users/' + userId), querySnapShot => {\r\n                        let data = querySnapShot.val() || [];\r\n                        dispatch(setDataUser(data));\r\n                        setIsLoading(true);\r\n                    });\r\n                }\r\n            }\r\n        })\r\n\r\n        return unsubscribe\r\n    }, [])\r\n\r\n    const getTabActive = () => {\r\n        let tabActive = \"Home\";\r\n        if (props.route && props.route.params && props.route.params.options && props.route.params.options.tabActive) {\r\n            tabActive = props.route.params.options.tabActive;\r\n        }\r\n        return tabActive;\r\n    }\r\n\r\n    return isLoading ?\r\n        (<Tab.Navigator initialRouteName={getTabActive()}>\r\n            <Tab.Screen options={{\r\n                headerShown: false,\r\n                tabBarActiveTintColor: \"#FA6400\",\r\n                tabBarIcon: ({ color, size }) => (\r\n                    <Ionicons name=\"home\" color={color} size={size} />\r\n                )\r\n            }} name=\"Home\" component={HomeScreen} />\r\n            <Tab.Screen options={{\r\n                headerShown: false,\r\n                tabBarActiveTintColor: \"#FA6400\",\r\n                tabBarIcon: ({ color, size }) => (\r\n                    <Entypo name=\"sweden\" color={color} size={size} />\r\n                )\r\n            }} name=\"Rooms\" component={RoomScreen} />\r\n            <Tab.Screen options={{\r\n                headerShown: false,\r\n                tabBarActiveTintColor: \"#FA6400\",\r\n                tabBarIcon: ({ color, size }) => (\r\n                    <SimpleLineIcons name=\"settings\" color={color} size={size} />\r\n                )\r\n            }} name=\"Settings\" component={SettingScreen} />\r\n        </Tab.Navigator>)\r\n        :\r\n        (<View style={styles.container}>\r\n            <ActivityIndicator size=\"large\" color=\"#FA6400\"/>\r\n        </View>);\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        justifyContent: \"center\"\r\n    }\r\n});\r\n\r\nexport default MainScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module"}